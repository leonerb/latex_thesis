%<*Table:chexpert-concurrence-matrix>
\begin{table}[h]
    \addtolength\tabcolsep{-1pt}
    \centering
    \begin{adjustbox}{width = 1.\textwidth}
    \begin{tabular}{l r r r r r r r r r r r r r r}
        \toprule
        {} &  \rotatebox{90}{(1) No Finding} & \rotatebox{90}{(2) Atelectasis} & \rotatebox{90}{(3) Cardiomegaly} & \rotatebox{90}{(4) Consolidation} &  \rotatebox{90}{(5) Edema} & \rotatebox{90}{(6) Enlarged Cardiom.} & \rotatebox{90}{(7) Fracture} & \rotatebox{90}{(8) Lung Lesion} & \rotatebox{90}{(9) Lung Opacity} & \rotatebox{90}{(10) Pleural Effusion} & \rotatebox{90}{(11) Pleural Other} & \rotatebox{90}{(12) Pneumonia} & \rotatebox{90}{(13) Pneumothorax} & \rotatebox{90}{(14) Support Devices} \\
        \midrule
        (1)                        &       22381 &           - &            - &             - &      - &                          - &        - &           - &            - &                - &             - &         - &            - &               - \\
        (2)                        &           0 &       33376 &            - &             - &      - &                          - &        - &           - &            - &                - &             - &         - &            - &               - \\
        (3)                        &           0 &        3828 &        27000 &             - &      - &                          - &        - &           - &            - &                - &             - &         - &            - &               - \\
        (4)                        &           0 &        2003 &         1436 &         14783 &      - &                          - &        - &           - &            - &                - &             - &         - &            - &               - \\
        (5)                        &           0 &        8844 &        11659 &          3154 &  52246 &                          - &        - &           - &            - &                - &             - &         - &            - &               - \\
        (6)                        &           0 &        1491 &         1901 &           585 &   2129 &                      10798 &        - &           - &            - &                - &             - &         - &            - &               - \\
        (7)                        &           0 &        1281 &          801 &           401 &   1009 &                        637 &     9040 &           - &            - &                - &             - &         - &            - &               - \\
        (8)                        &           0 &        1025 &          623 &           748 &    866 &                        509 &      343 &        9186 &            - &                - &             - &         - &            - &               - \\
        (9)                        &           0 &       14146 &        13049 &          5574 &  27455 &                       5100 &     3611 &        5316 &       105581 &                - &             - &         - &            - &               - \\
        (10)                       &           0 &       16290 &        11836 &          7403 &  26521 &                       3888 &     2456 &        3265 &        52198 &            86187 &             - &         - &            - &               - \\
        (11)                       &           0 &         389 &          325 &           300 &    304 &                        193 &      296 &         310 &         1879 &              920 &          3523 &         - &            - &               - \\
        (12)                       &           0 &         615 &          495 &          1014 &   1204 &                        150 &      141 &         454 &         4025 &             1733 &           123 &      6039 &            - &               - \\
        (13)                       &           0 &        3131 &          777 &           739 &   1479 &                        773 &     1050 &         866 &         9063 &             6691 &           253 &       146 &        19448 &               - \\
        (14)                       &        8808 &       20166 &        15539 &          7728 &  33491 &                       5614 &     3628 &        3212 &        61338 &            52869 &          1357 &      1765 &        11676 &          116001 \\
        \bottomrule
    \end{tabular}
    \addtolength\tabcolsep{+1pt}
    \end{adjustbox}
    \caption{Concurrence matrix of positive instances of the CheXpert dataset labels. 
Adapted and recalculated from \citep{Garbin2021}.
Cell values of the upper triangle are marked by "-" because the concurrence matrix is symmetric.}
\end{table}
%</Table:chexpert-concurrence-matrix>

%<*Table:settings-dataset-sizes1>
\begin{table}[h]
    \centering
    \begin{tabular}{l l l} 
    \toprule
    & & sample sizes \\
    \midrule
    \multirow{2}{3pt}{\rotatebox{90}{ID}} & No Finding & $n_{train} = 10856$ \\ 
    & & $n_{test} = 2714$ \\
    \hline
    \multirow{6}{3pt}{\rotatebox{90}{OOD}} & Cardiomegaly & $n_{test} = 2106$ \\ %\rotatebox{90}{OOD}
    &  Fracture & $n_{test} = 1833$ \\
    &  Lung Opacity & $n_{test} = 19488$* \\
    &  Pleural Effusion& $n_{test} = 4975$ \\
    &  Pneumothorax & $n_{test} = 2630$ \\
    &  Support Devices & $n_{test} = 6373$ \\
    \bottomrule
    \end{tabular}
    \caption{Dataset sizes for setting 1.
    $n_{train}$ refers to the number of training images in the in-distribution class and $n_{test}$ is the number of test images.
    * In setting 1, the super class Lung Opacity ($n_{test}=10880$) contains additional samples of Atelectasis ($n_{test}=2171$), Consolidation ($n_{test}=1327$), Edema ($n_{test}=3364$), Lung Lesion ($n_{test}=1105$) and Pneumonia ($n_{test}=641$).}
\end{table}
%</Table:settings-dataset-sizes1>

%<*Table:settings-dataset-sizes2>
\begin{table}[h]
    \centering
    \begin{tabular}{l l l} 
    \toprule
    & & sample sizes \\
    \midrule
    \multirow{2}{3pt}{\rotatebox{90}{ID}} & Cardiomegaly & $n_{train} = 28114$ \\ 
    & Pneumothorax & $n_{test} = 7200$ \\
    \hline
    \noalign{\vskip 1mm}
    \multirow{2}{3pt}{\rotatebox{90}{OOD}} & Fracture & $n_{test} = 7223$ \\[18pt] %\rotatebox{90}{OOD}
    \bottomrule
    \end{tabular}
    \caption{Dataset sizes for setting 2.
    $n_{train}$ refers to the number of training images in the in-distribution class and $n_{test}$ is the number of test images.}
\end{table}
%</Table:settings-dataset-sizes2>

%<*Table:settings-dataset-sizes3>
\begin{table}[h]
    \centering
    \begin{tabular}{l l l} 
    \toprule
    & & sample sizes \\
    \midrule
    \multirow{2}{3pt}{\rotatebox{90}{ID}} & Lung Opacity & $n_{train} = 62040$ \\ 
    & Pleural Effusion & $n_{test} = 3150$ \\
    \hline
    \noalign{\vskip 1mm}
    \multirow{2}{3pt}{\rotatebox{90}{OOD}} & Fracture & $n_{test} = 3166$ \\ %\rotatebox{90}{OOD}
    & Pneumonia &  \\
    \bottomrule
    \end{tabular}
    \caption{Dataset sizes for setting 3.
    $n_{train}$ refers to the number of training images in the in-distribution class and $n_{test}$ is the number of test images.}
\end{table}
%</Table:settings-dataset-sizes3>

%<*Table:settings-dataset-sizes>
\begin{table}[h]
	\begin{subtable}[t]{\textwidth}
        \centering
		\begin{tabular}[t]{l l l} 
            \toprule
            & & Split size \\
            \midrule
            \multirow{2}{3pt}{\rotatebox{90}{ID}} & No Finding & $n_{train} = 10856$ \\ 
            & & $n_{test} = 2714$ \\
            \hline
            \multirow{6}{3pt}{\rotatebox{90}{OOD}} & Cardiomegaly & $n_{test} = 2106$ \\ %\rotatebox{90}{OOD}
            &  Fracture & $n_{test} = 1833$ \\
            &  Lung Opacity & $n_{test} = 19488$* \\
            &  Pleural Effusion& $n_{test} = 4975$ \\
            &  Pneumothorax & $n_{test} = 2630$ \\
            &  Support Devices & $n_{test} = 6373$ \\
            \bottomrule
            \end{tabular}
		\caption{Setting 1}
	\end{subtable}
    \\[10pt]
	\begin{subtable}[t]{0.5\textwidth}
		\begin{tabular}[t]{l l l} 
            \toprule
            & & Split size \\
            \midrule
            \multirow{2}{3pt}{\rotatebox{90}{ID}} & Cardiomegaly & $n_{train} = 28114$ \\ 
            & Pneumothorax & $n_{test} = 7200$ \\
            \hline
            \noalign{\vskip 1mm}
            \multirow{2}{3pt}{\rotatebox{90}{OOD}} & Fracture & $n_{test} = 7223$ \\[18pt] %\rotatebox{90}{OOD}
            \bottomrule
            \end{tabular}
		\caption{Setting 2}
	\end{subtable}
    \begin{subtable}[t]{0.5\textwidth}
        \begin{tabular}[t]{l l l} 
        \toprule
        & & Split size \\
        \midrule
        \multirow{2}{3pt}{\rotatebox{90}{ID}} & Lung Opacity & $n_{train} = 62040$ \\ 
        & Pleural Effusion & $n_{test} = 3150$ \\
        \hline
        \noalign{\vskip 1mm}
        \multirow{2}{3pt}{\rotatebox{90}{OOD}} & Fracture & $n_{test} = 3166$ \\ %\rotatebox{90}{OOD}
        & Pneumonia &  \\[5pt]
        \bottomrule
        \end{tabular}
    \caption{Setting 3}
	\end{subtable}
    \caption{Dataset sizes for settings 1-3.
    $n_{train}$ refers to the number of training images in the in-distribution class and $n_{test}$ is the number of test images.
    *:  In setting 1, the super class Lung Opacity ($n_{test}=10880$) contains additional samples of Atelectasis ($n_{test}=2171$), Consolidation ($n_{test}=1327$), Edema ($n_{test}=3364$), Lung Lesion ($n_{test}=1105$) and Pneumonia ($n_{test}=641$).}
	\label{table:settings-dataset-sizes}
\end{table}
%</Table:settings-dataset-sizes>

%<*Table:dataset-splits>
\begin{table}[h]
    \centering
    \begin{tabular}{l l l c c c} 
    \toprule
    & & & \multicolumn{3}{c}{Evaluation metrics} \\
    \cmidrule{4-6}
    & In-distribution & Out-of-distribution & k-nn accuracy & AUC & AUCPR\\
    \midrule
    Setting 1 & No Finding & Cardiomegaly & \xmark  & \cmark & \cmark \\ 
    & & Fracture & & \\
    & & Lung Opacity & & \\
    & & Pleural Effusion & & \\
    & & Pneumothorax & & \\
    & & Support Devices & & \\
    \hline 
    Setting 2 & Cardiomegaly & Fracture & \cmark  & \cmark & \cmark \\
    & Pneumothorax &  &  & \\ 
    \hline
    Setting 3 & Lung Opacity & Fracture & \cmark  & \cmark & \cmark \\
    & Pleural Effusion & Pneumonia & \cmark  & \cmark & \cmark \\
    \bottomrule
    \end{tabular}
    \caption{In-distribution and out-of-distribution classes for different settings. 
    Setting 2 and 3 are based on \citep{Berger2021}.}
\end{table}
%</Table:dataset-splits>

%<*Table:normalizations>
\begin{table}[h]
    \centering
    \begin{tabular}{l c c} 
     \toprule
     & ImageNet Normalization & CheXpert Normalization \\
     \midrule
     k-nn accuracy & - - & - - \\ 
     \hline 
     AUC OOD & - - & - - \\
     \hline
     AUCPR OOD & - - & - - \\
     \bottomrule
    \end{tabular}
    \caption{Classification accuracies, AUC and AUCPR of OOD detection for two different normalizations.
    For the ImageNet normalization, all images were scaled with $\mu=(0.485, 0.456, 0.406)$ and $\sigma=(0.229, 0.224, 0.225)$. 
    The CheXpert normalization stands for a normalization with $\mu=(0.5330, 0.5330, 0.5330)$ and $\sigma=(0.0349, 0.0349, 0.0349)$ \citep[\href{https://github.com/christophbrgr/ood_detection_framework}{\color{Periwinkle}{implementation}}]{Berger2021}. 
    All metrics are averaged across both settings. 
    Separated metrics for both settings are available in the appendix [\textcolor{red}{add REF}].}
\end{table}
%</Table:normalizations>

%<*Table:dino-head-dim>
\begin{table}[h]
    \centering
    \begin{tabular}{l c c c c}
    \hline 
    & \multicolumn{4}{c}{Output Dimension} \\ 
    & 2048 & 4096 & 8192 & 12000 \\
    \hline\hline
    k-nn accuracy & - - & - - & - - & - - \\ 
    \hline 
    AUC OOD & - - & - - & - - & - -\\
    \hline
    AUCPR OOD & - - & - - & - - & - -\\
    \hline
    \end{tabular}
    \caption{Classification accuracies, AUC and AUCPR of OOD detection for varying sizes of the DINO head. 
    All metrics are averaged across both settings. 
    Separated metrics for both settings are available in the appendix [\textcolor{red}{add REF}].}
\end{table}
%</Table:dino-head-dim>

%<*Table:weights-init-method>
\begin{table}[h]
    \centering
    \begin{tabular}{l c c} 
     \hline
     & ImageNet initialization & Random initialization \\
     \hline\hline
     k-nn accuracy & - - & - - \\ 
     \hline 
     AUC OOD & - - & - - \\
     \hline
     AUCPR OOD & - - & - - \\
     \hline
    \end{tabular}
    \caption{Classification accuracies, AUC and AUCPR of OOD detection for two different initialization methods. 
    A DINO model pretrained on ImageNet was used as ImageNet initialization \citep[\href{https://github.com/facebookresearch/dino}{\color{Periwinkle}{implementation}}]{Caron2021}. 
    The truncated normal distribution initialization is based on \citep{Burkardt2014}.
    All metrics are averaged across both settings. 
    Separated metrics for both settings are available in the appendix [\textcolor{red}{add REF}]. Change AUC to AUROC}
\end{table}
%</Table:weights-init-method>

